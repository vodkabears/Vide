/*
 *  Vide - v0.5.1
 *  Easy as hell jQuery plugin for video backgrounds.
 *  http://vodkabears.github.io/vide/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery)}(this,function(a){"use strict";function b(a){var b,c,d,e,f,g,h,i={};for(f=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),h=0,g=f.length;h<g&&(c=f[h],-1===c.search(/^(http|https|ftp):\/\//)&&-1!==c.search(":"));h++)b=c.indexOf(":"),d=c.substring(0,b),e=c.substring(b+1),e||(e=void 0),"string"==typeof e&&(e="true"===e||"false"!==e&&e),"string"==typeof e&&(e=isNaN(e)?e:+e),i[d]=e;return null==d&&null==e?a:i}function c(a){a=""+a;var b,c,d,e=a.split(/\s+/),f="50%",g="50%";for(d=0,b=e.length;d<b;d++)c=e[d],"left"===c?f="0%":"right"===c?f="100%":"top"===c?g="0%":"bottom"===c?g="100%":"center"===c?0===d?f="50%":g="50%":0===d?f=c:g=c;return{x:f,y:g}}function d(b,c){var d=function(){c(this.src)};a('<img src="'+b+'.gif">').on("load",d),a('<img src="'+b+'.jpg">').on("load",d),a('<img src="'+b+'.jpeg">').on("load",d),a('<img src="'+b+'.png">').on("load",d)}function e(a,b){return a.indexOf(b)||(a+=b),a}function f(c,d,e){if(this.$element=a(c),"string"==typeof d&&(d=b(d)),e?"string"==typeof e&&(e=b(e)):e={},"string"==typeof d)d=d.replace(/\.\w*$/,"");else if("object"==typeof d)for(var f in d)d.hasOwnProperty(f)&&"poster"===f&&(d[f]=d[f].replace(/\.\w*$/,""));this.settings=a.extend({},h,e),this.path=d;try{this.init()}catch(g){if(g.message!==i)throw g}}var g="vide",h={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",resizing:!0,bgColor:"transparent",className:""},i="Not implemented";f.prototype.init=function(){var b,f,h=this,j=h.path,k=j,l="",m=h.$element,n=h.settings,o=c(n.position),p=n.posterType;f=h.$wrapper=a("<div>").addClass(n.className).css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-color":n.bgColor,"background-repeat":"no-repeat","background-position":o.x+" "+o.y}),"object"==typeof j&&(j.poster?k=j.poster:j.mp4?k=j.mp4:j.webm?k=j.webm:j.ogv&&(k=j.ogv)),"detect"===p?d(k,function(a){f.css("background-image","url("+a+")")}):"none"!==p&&f.css("background-image","url("+k+"."+p+")"),"static"===m.css("position")&&m.css("position","relative"),m.prepend(f),"object"==typeof j?(j.mp4&&(l+='<source src="'+e(j.mp4,".mp4")+'" type="video/mp4">'),j.webm&&(l+='<source src="'+e(j.webm,".webm")+'" type="video/webm">'),j.ogv&&(l+='<source src="'+e(j.ogv,".ogv")+'" type="video/ogg">'),b=h.$video=a("<video>"+l+"</video>")):b=h.$video=a('<video><source src="'+j+'.mp4" type="video/mp4"><source src="'+j+'.webm" type="video/webm"><source src="'+j+'.ogv" type="video/ogg"></video>');try{b.prop({autoplay:n.autoplay,loop:n.loop,volume:n.volume,muted:n.muted,defaultMuted:n.muted,playbackRate:n.playbackRate,defaultPlaybackRate:n.playbackRate})}catch(q){throw new Error(i)}b.css({margin:"auto",position:"absolute","z-index":-1,top:o.y,left:o.x,"-webkit-transform":"translate(-"+o.x+", -"+o.y+")","-ms-transform":"translate(-"+o.x+", -"+o.y+")","-moz-transform":"translate(-"+o.x+", -"+o.y+")",transform:"translate(-"+o.x+", -"+o.y+")",visibility:"hidden",opacity:0}).one("canplaythrough."+g,function(){h.resize()}).one("playing."+g,function(){b.css({visibility:"visible",opacity:1}),f.css("background-image","none")}),m.on("resize."+g,function(){n.resizing&&h.resize()}),f.append(b)},f.prototype.getVideoObject=function(){return this.$video[0]},f.prototype.resize=function(){if(this.$video){var a=this.$wrapper,b=this.$video,c=b[0],d=c.videoHeight,e=c.videoWidth,f=a.height(),g=a.width();g/e>f/d?b.css({width:g+2,height:"auto"}):b.css({width:"auto",height:f+2})}},f.prototype.destroy=function(){delete a[g].lookup[this.index],this.$video&&this.$video.off(g),this.$element.off(g).removeData(g),this.$wrapper.remove()},a[g]={lookup:[]},a.fn[g]=function(b,c){var d;return this.each(function(){d=a.data(this,g),d&&d.destroy(),d=new f(this,b,c),d.index=a[g].lookup.push(d)-1,a.data(this,g,d)}),this},a(document).ready(function(){var b=a(window);b.on("resize."+g,function(){for(var b,c=a[g].lookup.length,d=0;d<c;d++)(b=a[g].lookup[d])&&b.settings.resizing&&b.resize()}),b.on("unload."+g,function(){return!1}),a(document).find("[data-"+g+"-bg]").each(function(b,c){var d=a(c),e=d.data(g+"-options"),f=d.data(g+"-bg");d[g](f,e)})})});